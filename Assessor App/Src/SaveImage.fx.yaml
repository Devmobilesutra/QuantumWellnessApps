SaveImage As screen:
    OnVisible: =Set(VarImageEdit,false);

    Image2 As image:
        Height: =Parent.Height-150
        Image: |-
            =//If(IsBlank(VarPhoto),'Sample Image',VarPhoto)
            If(IsBlank(VarOutput) ,VarPhoto,VarOutput)
        Width: =Parent.Width-100
        X: =(Parent.Width-Self.Width)/2
        Y: =20
        ZIndex: =1

    Button6 As button:
        Color: =RGBA(0, 0, 0, 1)
        Fill: =RGBA(0, 0, 0, 0)
        HoverColor: =Self.Color
        HoverFill: =Self.Fill
        OnSelect: =Navigate(CaptureImage,ScreenTransition.UnCoverRight);
        PressedColor: =Self.Color
        PressedFill: =Self.Fill
        Text: ="Retake"
        Width: =200
        X: =20
        Y: =Parent.Height-50
        ZIndex: =2

    Button8 As button:
        Color: =RGBA(0, 0, 0, 1)
        Fill: =RGBA(0, 0, 0, 0)
        HoverColor: =Self.Color
        HoverFill: =Self.Fill
        OnSelect: |-
            =
            //UpdateContext({demooo:VarOutput});
            
            UpdateIf(
                GC_checkpointItem_Images,
                checkpointItemImagesId = GlryImagesFS.Selected.checkpointItemImagesId,
                {Image:Image2.Image//,
                //CIIstatusUpdate:0
                }
            );
            Navigate(
                FindingScreen,
                ScreenTransition.Cover
            )
        PressedColor: =Self.Color
        PressedFill: =Self.Fill
        Text: ="Use Photo"
        Width: =206
        X: =1143
        Y: =Parent.Height-50
        ZIndex: =3

    Icon5 As icon.Edit:
        Color: =RGBA(0, 0, 0, 1)
        Height: =44
        Icon: =Icon.Edit
        OnSelect: |-
            =Reset(PenInput1);
            Set(VarImageEdit,true);
        Visible: =VarImageEdit= false
        Width: =44
        X: =Parent.Width-Self.Width-20
        Y: =30
        ZIndex: =4

    PenInput1 As inkControl:
        BorderThickness: =0
        Height: =Parent.Height//Image2.Height+120
        Visible: =VarImageEdit =true
        Width: =Image2.Width//-60
        X: =Image2.X //90
        ZIndex: =5

    imgSpinnerResume_1 As image:
        Fill: =RGBA(0, 0, 0, 0.29)
        Height: =Parent.Height
        Image: ='ajax-loader 2'
        ImagePosition: =ImagePosition.Center
        Visible: =VarImgEditSpiner
        Width: =Parent.Width
        X: =(Parent.Width-Self.Width)/2
        Y: =(Parent.Height-Self.Height)/2
        ZIndex: =6

    Icon7 As icon.Save:
        Color: =RGBA(0, 0, 0, 1)
        Height: =44
        Icon: =Icon.Save
        OnSelect: |
            =Set(VarImgEditSpiner,true);
            Set(VarOutput,PowerAppsButton.Run(
                Substitute(
                    JSON(
                        PenInput1.Image,
                        JSONFormat.IncludeBinaryData
                    ),
                    """",
                    ""
                ),
                Substitute(
                    JSON(
                        Image2.Image,
                        JSONFormat.IncludeBinaryData
                    ),
                    """",
                    ""
                ),
                
                PenInput1.Width,
                PenInput1.Height,
                 Image2.Width+600,
                Image2.Height
            ).overlapimage;);
            Set(VarImageEdit,false);
            Set(VarImgEditSpiner,false);
        Visible: =VarImageEdit
        Width: =44
        X: =Parent.Width-Self.Width-20
        Y: =30
        ZIndex: =7

