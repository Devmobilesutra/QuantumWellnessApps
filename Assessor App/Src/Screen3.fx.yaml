Screen3 As screen:
    OnVisible: =Set(VarImageEdit,false);

    Image2 As image:
        Height: =Parent.Height-150
        Image: =If(IsBlank(VarPhoto),'Sample Image',VarPhoto)
        Width: =Parent.Width-80
        X: =40
        Y: =20
        ZIndex: =1

    Button6 As button:
        Color: =RGBA(0, 0, 0, 1)
        Fill: =RGBA(0, 0, 0, 0)
        HoverColor: =Self.Color
        HoverFill: =Self.Fill
        OnSelect: =Navigate(Screen2,ScreenTransition.UnCoverRight);
        PressedColor: =Self.Color
        PressedFill: =Self.Fill
        Text: ="Retake"
        Width: =200
        X: =20
        Y: =Parent.Height-50
        ZIndex: =4

    Button8 As button:
        Color: =RGBA(0, 0, 0, 1)
        Fill: =RGBA(0, 0, 0, 0)
        HoverColor: =Self.Color
        HoverFill: =Self.Fill
        OnSelect: |-
            =
            
            
            UpdateIf(
                GC_checkpointItem_Images,
                checkpointItemImagesId = GlryImagesFS.Selected.checkpointItemImagesId,
                {Image: VarOutput,
                CIIstatusUpdate:0}
            );
            Navigate(
                FindingScreen,
                ScreenTransition.Cover
            )
        PressedColor: =Self.Color
        PressedFill: =Self.Fill
        Text: ="Use Photo"
        Width: =200
        X: =Parent.Width-Self.Width-20
        Y: =Parent.Height-50
        ZIndex: =5

    Icon5 As icon.Edit:
        Color: =RGBA(0, 0, 0, 1)
        Height: =44
        Icon: =Icon.Edit
        OnSelect: =Set(VarImageEdit,true);
        Visible: =VarImageEdit= false
        Width: =44
        X: =Parent.Width-Self.Width-20
        Y: =30
        ZIndex: =6

    PenInput1 As inkControl:
        BorderThickness: =0
        Height: =Parent.Height-20
        Visible: =VarImageEdit =true
        Width: =Parent.Width-120
        X: =60
        ZIndex: =7

    Icon7 As icon.Save:
        Color: =RGBA(0, 0, 0, 1)
        Height: =44
        Icon: =Icon.Save
        OnSelect: |-
            =Set(VarImageEdit,false);
            Set(VarOutput,PowerAppsButton.Run(
                Substitute(
                    JSON(
                        PenInput1.Image,
                        JSONFormat.IncludeBinaryData
                    ),
                    """",
                    ""
                ),
                Substitute(
                    JSON(
                        Image2.Image,
                        JSONFormat.IncludeBinaryData
                    ),
                    """",
                    ""
                ),
                 Image2.Width,
                Image2.Height,
                PenInput1.Width,
                PenInput1.Height
            ).overlapimage;);
            Refresh(MarkupImages);
        Visible: =VarImageEdit
        Width: =44
        X: =Parent.Width-Self.Width-20
        Y: =30
        ZIndex: =8

